Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.getNodePrefixPath = getNodePrefixPath;
exports.getESLintFromDirectory = getESLintFromDirectory;
exports.refreshModulesPath = refreshModulesPath;
exports.getESLintInstance = getESLintInstance;
exports.getConfigPath = getConfigPath;
exports.getRelativePath = getRelativePath;
exports.getArgv = getArgv;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _child_process = require('child_process');

var _child_process2 = _interopRequireDefault(_child_process);

var _resolveEnv = require('resolve-env');

var _resolveEnv2 = _interopRequireDefault(_resolveEnv);

var _atomLinter = require('atom-linter');

var _consistentPath = require('consistent-path');

var _consistentPath2 = _interopRequireDefault(_consistentPath);

'use babel';

var Cache = {
  ESLINT_LOCAL_PATH: _path2['default'].normalize(_path2['default'].join(__dirname, '..', 'node_modules', 'eslint')),
  NODE_PREFIX_PATH: null,
  LAST_MODULES_PATH: null
};

function getNodePrefixPath() {
  if (Cache.NODE_PREFIX_PATH === null) {
    var npmCommand = process.platform === 'win32' ? 'npm.cmd' : 'npm';
    try {
      Cache.NODE_PREFIX_PATH = _child_process2['default'].spawnSync(npmCommand, ['get', 'prefix'], {
        env: Object.assign(Object.assign({}, process.env), { PATH: (0, _consistentPath2['default'])() })
      }).output[1].toString().trim();
    } catch (e) {
      throw new Error('Unable to execute `npm get prefix`. Please make sure Atom is getting $PATH correctly');
    }
  }
  return Cache.NODE_PREFIX_PATH;
}

function getESLintFromDirectory(modulesDir, config) {
  var ESLintDirectory = null;

  if (config.useGlobalEslint) {
    var prefixPath = config.globalNodePath || getNodePrefixPath();
    if (process.platform === 'win32') {
      ESLintDirectory = _path2['default'].join(prefixPath, 'node_modules', 'eslint');
    } else {
      ESLintDirectory = _path2['default'].join(prefixPath, 'lib', 'node_modules', 'eslint');
    }
  } else {
    ESLintDirectory = _path2['default'].join(modulesDir || '', 'eslint');
  }
  try {
    return require(_path2['default'].join(ESLintDirectory, 'lib', 'cli.js'));
  } catch (e) {
    if (config.useGlobalEslint && e.code === 'MODULE_NOT_FOUND') {
      throw new Error('ESLint not found, Please install or make sure Atom is getting $PATH correctly');
    }
    return require(_path2['default'].join(Cache.ESLINT_LOCAL_PATH, 'lib', 'cli.js'));
  }
}

function refreshModulesPath(modulesDir) {
  if (Cache.LAST_MODULES_PATH !== modulesDir) {
    Cache.LAST_MODULES_PATH = modulesDir;
    process.env.NODE_PATH = modulesDir || '';
    require('module').Module._initPaths();
  }
}

function getESLintInstance(fileDir, config) {
  var modulesDir = _path2['default'].dirname((0, _atomLinter.findCached)(fileDir, 'node_modules/eslint'));
  refreshModulesPath(modulesDir);
  return getESLintFromDirectory(modulesDir, config);
}

function getConfigPath(fileDir) {
  var configFile = (0, _atomLinter.findCached)(fileDir, ['.eslintrc.js', '.eslintrc.yaml', '.eslintrc.yml', '.eslintrc.json', '.eslintrc']);
  if (configFile) {
    return configFile;
  }

  var packagePath = (0, _atomLinter.findCached)(fileDir, 'package.json');
  if (packagePath && Boolean(require(packagePath).eslintConfig)) {
    return packagePath;
  }
  return null;
}

function getRelativePath(fileDir, filePath, config) {
  var ignoreFile = config.disableEslintIgnore ? null : (0, _atomLinter.findCached)(fileDir, '.eslintignore');

  if (ignoreFile) {
    var ignoreDir = _path2['default'].dirname(ignoreFile);
    process.chdir(ignoreDir);
    return _path2['default'].relative(ignoreDir, filePath);
  }
  process.chdir(fileDir);
  return _path2['default'].basename(filePath);
}

function getArgv(type, config, filePath, fileDir, givenConfigPath) {
  var configPath = undefined;
  if (givenConfigPath === null) {
    configPath = config.eslintrcPath || null;
  } else configPath = givenConfigPath;

  var argv = [process.execPath, 'a-b-c' // dummy value for eslint executable
  ];
  if (type === 'lint') {
    argv.push('--stdin');
  }
  argv.push('--format', _path2['default'].join(__dirname, 'reporter.js'));

  var ignoreFile = config.disableEslintIgnore ? null : (0, _atomLinter.findCached)(fileDir, '.eslintignore');
  if (ignoreFile) {
    argv.push('--ignore-path', ignoreFile);
  }

  if (config.eslintRulesDir) {
    var rulesDir = (0, _resolveEnv2['default'])(config.eslintRulesDir);
    if (!_path2['default'].isAbsolute(rulesDir)) {
      rulesDir = (0, _atomLinter.findCached)(fileDir, rulesDir);
    }
    argv.push('--rulesdir', rulesDir);
  }
  if (configPath) {
    argv.push('--config', (0, _resolveEnv2['default'])(configPath));
  }
  if (config.disableEslintIgnore) {
    argv.push('--no-ignore');
  }
  if (type === 'lint') {
    argv.push('--stdin-filename', filePath);
  } else if (type === 'fix') {
    argv.push(filePath);
    argv.push('--fix');
  }

  return argv;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXdzb25ib3RzZm9yZC8uYXRvbS9wYWNrYWdlcy9saW50ZXItZXNsaW50L3NyYy93b3JrZXItaGVscGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O29CQUVpQixNQUFNOzs7OzZCQUNFLGVBQWU7Ozs7MEJBQ2pCLGFBQWE7Ozs7MEJBQ1QsYUFBYTs7OEJBQ3BCLGlCQUFpQjs7OztBQU5yQyxXQUFXLENBQUE7O0FBUVgsSUFBTSxLQUFLLEdBQUc7QUFDWixtQkFBaUIsRUFBRSxrQkFBSyxTQUFTLENBQUMsa0JBQUssSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZGLGtCQUFnQixFQUFFLElBQUk7QUFDdEIsbUJBQWlCLEVBQUUsSUFBSTtDQUN4QixDQUFBOztBQUVNLFNBQVMsaUJBQWlCLEdBQUc7QUFDbEMsTUFBSSxLQUFLLENBQUMsZ0JBQWdCLEtBQUssSUFBSSxFQUFFO0FBQ25DLFFBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxRQUFRLEtBQUssT0FBTyxHQUFHLFNBQVMsR0FBRyxLQUFLLENBQUE7QUFDbkUsUUFBSTtBQUNGLFdBQUssQ0FBQyxnQkFBZ0IsR0FDcEIsMkJBQWEsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsRUFBRTtBQUNwRCxXQUFHLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsa0NBQVMsRUFBRSxDQUFDO09BQ3hFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUE7S0FDakMsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFlBQU0sSUFBSSxLQUFLLENBQ2Isc0ZBQXNGLENBQ3ZGLENBQUE7S0FDRjtHQUNG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VUFBVSxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQzlCLGNBQVEsR0FBRyw0QkFBVyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUE7S0FDekM7QUFDRCxRQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQTtHQUNsQztBQUNELE1BQUksVUFBVSxFQUFFO0FBQ2QsUUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsNkJBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQTtHQUM5QztBQUNELE1BQUksTUFBTSxDQUFDLG1CQUFtQixFQUFFO0FBQzlCLFFBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7R0FDekI7QUFDRCxNQUFJLElBQUksS0FBSyxNQUFNLEVBQUU7QUFDbkIsUUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxRQUFRLENBQUMsQ0FBQTtHQUN4QyxNQUFNLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRTtBQUN6QixRQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ25CLFFBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7R0FDbkI7O0FBRUQsU0FBTyxJQUFJLENBQUE7Q0FDWiIsImZpbGUiOiIvVXNlcnMvZGF3c29uYm90c2ZvcmQvLmF0b20vcGFja2FnZXMvbGludGVyLWVzbGludC9zcmMvd29ya2VyLWhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5pbXBvcnQgUGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IENoaWxkUHJvY2VzcyBmcm9tICdjaGlsZF9wcm9jZXNzJ1xuaW1wb3J0IHJlc29sdmVFbnYgZnJvbSAncmVzb2x2ZS1lbnYnXG5pbXBvcnQgeyBmaW5kQ2FjaGVkIH0gZnJvbSAnYXRvbS1saW50ZXInXG5pbXBvcnQgZ2V0UGF0aCBmcm9tICdjb25zaXN0ZW50LXBhdGgnXG5cbmNvbnN0IENhY2hlID0ge1xuICBFU0xJTlRfTE9DQUxfUEFUSDogUGF0aC5ub3JtYWxpemUoUGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ25vZGVfbW9kdWxlcycsICdlc2xpbnQnKSksXG4gIE5PREVfUFJFRklYX1BBVEg6IG51bGwsXG4gIExBU1RfTU9EVUxFU19QQVRIOiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlUHJlZml4UGF0aCgpIHtcbiAgaWYgKENhY2hlLk5PREVfUFJFRklYX1BBVEggPT09IG51bGwpIHtcbiAgICBjb25zdCBucG1Db21tYW5kID0gcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyA/ICducG0uY21kJyA6ICducG0nXG4gICAgdHJ5IHtcbiAgICAgIENhY2hlLk5PREVfUFJFRklYX1BBVEggPVxuICAgICAgICBDaGlsZFByb2Nlc3Muc3Bhd25TeW5jKG5wbUNvbW1hbmQsIFsnZ2V0JywgJ3ByZWZpeCddLCB7XG4gICAgICAgICAgZW52OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByb2Nlc3MuZW52KSwgeyBQQVRIOiBnZXRQYXRoKCkgfSlcbiAgICAgICAgfSkub3V0cHV0WzFdLnRvU3RyaW5nKCkudHJpbSgpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVW5hYmxlIHRvIGV4ZWN1dGUgYG5wbSBnZXQgcHJlZml4YC4gUGxlYXNlIG1ha2Ugc3VyZSBBdG9tIGlzIGdldHRpbmcgJFBBVEggY29ycmVjdGx5J1xuICAgICAgKVxuICAgIH1cbiAgfVxuICByZXR1cm4gQ2FjaGUuTk9ERV9QUkVGSVhfUEFUSFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RVNMaW50RnJvbURpcmVjdG9yeShtb2R1bGVzRGlyLCBjb25maWcpIHtcbiAgbGV0IEVTTGludERpcmVjdG9yeSA9IG51bGxcblxuICBpZiAoY29uZmlnLnVzZUdsb2JhbEVzbGludCkge1xuICAgIGNvbnN0IHByZWZpeFBhdGggPSBjb25maWcuZ2xvYmFsTm9kZVBhdGggfHwgZ2V0Tm9kZVByZWZpeFBhdGgoKVxuICAgIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInKSB7XG4gICAgICBFU0xpbnREaXJlY3RvcnkgPSBQYXRoLmpvaW4ocHJlZml4UGF0aCwgJ25vZGVfbW9kdWxlcycsICdlc2xpbnQnKVxuICAgIH0gZWxzZSB7XG4gICAgICBFU0xpbnREaXJlY3RvcnkgPSBQYXRoLmpvaW4ocHJlZml4UGF0aCwgJ2xpYicsICdub2RlX21vZHVsZXMnLCAnZXNsaW50JylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgRVNMaW50RGlyZWN0b3J5ID0gUGF0aC5qb2luKG1vZHVsZXNEaXIgfHwgJycsICdlc2xpbnQnKVxuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHJlcXVpcmUoUGF0aC5qb2luKEVTTGludERpcmVjdG9yeSwgJ2xpYicsICdjbGkuanMnKSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChjb25maWcudXNlR2xvYmFsRXNsaW50ICYmIGUuY29kZSA9PT0gJ01PRFVMRV9OT1RfRk9VTkQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdFU0xpbnQgbm90IGZvdW5kLCBQbGVhc2UgaW5zdGFsbCBvciBtYWtlIHN1cmUgQXRvbSBpcyBnZXR0aW5nICRQQVRIIGNvcnJlY3RseSdcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHJlcXVpcmUoUGF0aC5qb2luKENhY2hlLkVTTElOVF9MT0NBTF9QQVRILCAnbGliJywgJ2NsaS5qcycpKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWZyZXNoTW9kdWxlc1BhdGgobW9kdWxlc0Rpcikge1xuICBpZiAoQ2FjaGUuTEFTVF9NT0RVTEVTX1BBVEggIT09IG1vZHVsZXNEaXIpIHtcbiAgICBDYWNoZS5MQVNUX01PRFVMRVNfUEFUSCA9IG1vZHVsZXNEaXJcbiAgICBwcm9jZXNzLmVudi5OT0RFX1BBVEggPSBtb2R1bGVzRGlyIHx8ICcnXG4gICAgcmVxdWlyZSgnbW9kdWxlJykuTW9kdWxlLl9pbml0UGF0aHMoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFU0xpbnRJbnN0YW5jZShmaWxlRGlyLCBjb25maWcpIHtcbiAgY29uc3QgbW9kdWxlc0RpciA9IFBhdGguZGlybmFtZShmaW5kQ2FjaGVkKGZpbGVEaXIsICdub2RlX21vZHVsZXMvZXNsaW50JykpXG4gIHJlZnJlc2hNb2R1bGVzUGF0aChtb2R1bGVzRGlyKVxuICByZXR1cm4gZ2V0RVNMaW50RnJvbURpcmVjdG9yeShtb2R1bGVzRGlyLCBjb25maWcpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWdQYXRoKGZpbGVEaXIpIHtcbiAgY29uc3QgY29uZmlnRmlsZSA9XG4gICAgZmluZENhY2hlZChmaWxlRGlyLCBbXG4gICAgICAnLmVzbGludHJjLmpzJywgJy5lc2xpbnRyYy55YW1sJywgJy5lc2xpbnRyYy55bWwnLCAnLmVzbGludHJjLmpzb24nLCAnLmVzbGludHJjJ1xuICAgIF0pXG4gIGlmIChjb25maWdGaWxlKSB7XG4gICAgcmV0dXJuIGNvbmZpZ0ZpbGVcbiAgfVxuXG4gIGNvbnN0IHBhY2thZ2VQYXRoID0gZmluZENhY2hlZChmaWxlRGlyLCAncGFja2FnZS5qc29uJylcbiAgaWYgKHBhY2thZ2VQYXRoICYmIEJvb2xlYW4ocmVxdWlyZShwYWNrYWdlUGF0aCkuZXNsaW50Q29uZmlnKSkge1xuICAgIHJldHVybiBwYWNrYWdlUGF0aFxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxhdGl2ZVBhdGgoZmlsZURpciwgZmlsZVBhdGgsIGNvbmZpZykge1xuICBjb25zdCBpZ25vcmVGaWxlID0gY29uZmlnLmRpc2FibGVFc2xpbnRJZ25vcmUgPyBudWxsIDogZmluZENhY2hlZChmaWxlRGlyLCAnLmVzbGludGlnbm9yZScpXG5cbiAgaWYgKGlnbm9yZUZpbGUpIHtcbiAgICBjb25zdCBpZ25vcmVEaXIgPSBQYXRoLmRpcm5hbWUoaWdub3JlRmlsZSlcbiAgICBwcm9jZXNzLmNoZGlyKGlnbm9yZURpcilcbiAgICByZXR1cm4gUGF0aC5yZWxhdGl2ZShpZ25vcmVEaXIsIGZpbGVQYXRoKVxuICB9XG4gIHByb2Nlc3MuY2hkaXIoZmlsZURpcilcbiAgcmV0dXJuIFBhdGguYmFzZW5hbWUoZmlsZVBhdGgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmd2KHR5cGUsIGNvbmZpZywgZmlsZVBhdGgsIGZpbGVEaXIsIGdpdmVuQ29uZmlnUGF0aCkge1xuICBsZXQgY29uZmlnUGF0aFxuICBpZiAoZ2l2ZW5Db25maWdQYXRoID09PSBudWxsKSB7XG4gICAgY29uZmlnUGF0aCA9IGNvbmZpZy5lc2xpbnRyY1BhdGggfHwgbnVsbFxuICB9IGVsc2UgY29uZmlnUGF0aCA9IGdpdmVuQ29uZmlnUGF0aFxuXG4gIGNvbnN0IGFyZ3YgPSBbXG4gICAgcHJvY2Vzcy5leGVjUGF0aCxcbiAgICAnYS1iLWMnIC8vIGR1bW15IHZhbHVlIGZvciBlc2xpbnQgZXhlY3V0YWJsZVxuICBdXG4gIGlmICh0eXBlID09PSAnbGludCcpIHtcbiAgICBhcmd2LnB1c2goJy0tc3RkaW4nKVxuICB9XG4gIGFyZ3YucHVzaCgnLS1mb3JtYXQnLCBQYXRoLmpvaW4oX19kaXJuYW1lLCAncmVwb3J0ZXIuanMnKSlcblxuICBjb25zdCBpZ25vcmVGaWxlID0gY29uZmlnLmRpc2FibGVFc2xpbnRJZ25vcmUgPyBudWxsIDogZmluZENhY2hlZChmaWxlRGlyLCAnLmVzbGludGlnbm9yZScpXG4gIGlmIChpZ25vcmVGaWxlKSB7XG4gICAgYXJndi5wdXNoKCctLWlnbm9yZS1wYXRoJywgaWdub3JlRmlsZSlcbiAgfVxuXG4gIGlmIChjb25maWcuZXNsaW50UnVsZXNEaXIpIHtcbiAgICBsZXQgcnVsZXNEaXIgPSByZXNvbHZlRW52KGNvbmZpZy5lc2xpbnRSdWxlc0RpcilcbiAgICBpZiAoIVBhdGguaXNBYnNvbHV0ZShydWxlc0RpcikpIHtcbiAgICAgIHJ1bGVzRGlyID0gZmluZENhY2hlZChmaWxlRGlyLCBydWxlc0RpcilcbiAgICB9XG4gICAgYXJndi5wdXNoKCctLXJ1bGVzZGlyJywgcnVsZXNEaXIpXG4gIH1cbiAgaWYgKGNvbmZpZ1BhdGgpIHtcbiAgICBhcmd2LnB1c2goJy0tY29uZmlnJywgcmVzb2x2ZUVudihjb25maWdQYXRoKSlcbiAgfVxuICBpZiAoY29uZmlnLmRpc2FibGVFc2xpbnRJZ25vcmUpIHtcbiAgICBhcmd2LnB1c2goJy0tbm8taWdub3JlJylcbiAgfVxuICBpZiAodHlwZSA9PT0gJ2xpbnQnKSB7XG4gICAgYXJndi5wdXNoKCctLXN0ZGluLWZpbGVuYW1lJywgZmlsZVBhdGgpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2ZpeCcpIHtcbiAgICBhcmd2LnB1c2goZmlsZVBhdGgpXG4gICAgYXJndi5wdXNoKCctLWZpeCcpXG4gIH1cblxuICByZXR1cm4gYXJndlxufVxuIl19
//# sourceURL=/Users/dawsonbotsford/.atom/packages/linter-eslint/src/worker-helpers.js
